<% if flash[:add_record] %>
  <div class="alert alert-success">
    <%= flash[:add_record] %>
  </div>
<% end %>
<% if flash[:miss_add_record] %>
  <div class="alert alert-danger">
    <%= flash[:miss_add_record] %>
  </div>
<% end %>
<% if flash[:miss_sameday_record] %>
  <div class="alert alert-warning">
    <%= flash[:miss_sameday_record] %>
  </div>
<% end %>
<% if flash[:success_record_update] %>
  <div class="alert alert-success">
    <%= flash[:success_record_update] %>
  </div>
<% end %>
<% if flash[:miss_recored_update] %>
  <div class="alert alert-danger">
    <%= flash[:miss_recored_update] %>
  </div>
<% end %>

<div class="record-index contaiber">
  <div class="row">
  	<div class="col-md-8">
  	  <h3>本日の進捗</h3>
      <%= form_with(model: @record, url: records_path, local: true) do |r| %>
        <label class="new-record-title" for="">学習項目</label>
        <%= r.text_field :title, class: 'form-control' %>
        <label class="new-record-body" for="">進捗詳細</label>
        <%= r.text_area :body, class: 'form-control', style: "height: 100px;" %>
        <label class="new-record-studytime sr-only" for="">学習時間</label><br><br>
        <div class="input-group">
          <span class="input-group-addon">学習時間：</span>
          <%= r.number_field :studytime, min: 0, max: 24, class: 'form-control', :step=>"0.1" %>
          <span class="input-group-addon">時間</span>
        </div>
        <div class="new-todo-create"><%= r.submit '学習内容を報告する', class: "btn btn-warning", style: "width: 150px;" %></div>
      <% end %>
  	</div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <h3>成果報告一覧</h3>
      <table class="table table-striped" style="table-layout:fixed;width:100%;">
        <colgroup>
          <col style="width:10%;">
          <col style="width:15%;">
          <col style="width:55%;">
          <col style="width:10%;">
          <col style="width:10%;">
        </colgroup>
        <thead>
          <tr>
            <th>日付</th>
            <th>項目</th>
            <th>詳細</th>
            <th>学習時間<br>(合計学習時間)</th>
            <th>その他</th>
          </tr>
        </thead>
        <tbody style="word-wrap:break-word;">
          <% @records.each do |re| %>
            <tr>
              <th>
                <h5>
                  <%= link_to edit_record_path(re.id) do %>
                    <%= re.created_at.strftime("%Y-%m-%d") %>
                  <% end %>
                </h5>
              </th>
              <th>
                <h5><%= re.title %></h5>
              </th>
              <th>
                <h5><%= re.body %></h5>
              </th>
              <th>
                <h5><%= re.studytime %>時間</h5>
                <h5>(<%= re.until_today_studytime %>時間)</h5>
              </th>
              <th>
                <%= link_to "編集", edit_record_path(re.id), :class =>"btn btn-success" %>
              </th>
            </tr>
          <% end %>
        </tbody>
      </table>
      <div class="page_center">
        <%= paginate @records %>
      </div>
    </div>
  </div>
</div>